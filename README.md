# 📊 传感器数据可视化工具

专为KeNaiXin APP数据设计的Streamlit可视化应用，支持CSV文件导入、DIF/RAW数据分析、时间筛选和分页浏览。

## ✨ 功能特性

### 📈 图表展示
- **DIF趋势图**: 展示DIF数据变化趋势（绿色）
- **RAW趋势图**: 展示RAW数据变化趋势（橙色）
- **双系列对比**: 同时显示DIF和RAW，对比分析

### 🔍 数据筛选
- **入耳状态**: 筛选入耳/出耳数据
- **用户名**: 选择特定用户
- **左右耳**: 筛选左耳或右耳数据
- **⏰ 时间范围**: 支持日期时间精确筛选（自动包含同分钟数据）

### 📊 数据分页
- 大数据量自动分页，每页30条
- 页码选择器，快速跳转
- 图表与当前页数据联动

### 📋 交互功能
- 鼠标悬停查看数据详情
- 图表缩放、平移、导出
- 时间戳X轴显示（时分秒格式）

## 🚀 快速开始

### 本地运行
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 启动应用
streamlit run csv_viewer.py

# 3. 打开浏览器
# http://localhost:8501
```

### 云端部署
将代码推送到GitHub，在[Streamlit Cloud](https://streamlit.io/cloud)部署后即可通过浏览器访问。

## 📋 系统要求

- **Python**: 3.7+
- **依赖包**: streamlit, pandas, plotly
- **浏览器**: Chrome/Safari/Edge等现代浏览器

## 📖 使用指南

### 1️⃣ 上传数据
- 点击左侧"📤 文件上传"
- 选择从KeNaiXin APP导出的CSV文件

### 2️⃣ 筛选数据
在"🔎 数据筛选"中设置条件：
- 选择入耳状态
- 选择用户
- 选择左右耳
- 设置时间范围

### 3️⃣ 查看图表
在"📈 图表展示"中选择图表类型，查看数据趋势

### 4️⃣ 分页浏览
在"📊 数据分页"中选择页码，查看不同数据集

### 5️⃣ 导出数据
在"💾 数据导出"中导出筛选后的CSV文件

## 📊 CSV文件格式

### 必需字段
- `DIF百分比`: DIF数据百分比
- `RAW百分比`: RAW数据百分比

### 可选字段
- `用户名`: 数据所属用户
- `MAC地址`: 设备MAC地址
- `时间/时间戳`: 数据时间戳（支持多种格式）
- `是否入耳`: 入耳状态（是/否）
- `左右耳`: 左耳/右耳标识

### 示例CSV
```csv
用户名,MAC地址,时间,DIF百分比,RAW百分比,是否入耳,左右耳
user1,AA:BB:CC:DD:EE:FF,2024-01-15 14:30:01,75.5,82.3,是,左耳
user1,AA:BB:CC:DD:EE:FF,2024-01-15 14:30:02,76.2,83.1,是,左耳
user2,BB:CC:DD:EE:FF:AA,2024-01-15 14:30:03,45.3,52.7,否,右耳
```

## 📝 更新日志

### v1.1.0 (2024-11-11)
- ✨ **新增时间戳筛选功能**
  - 支持按日期范围筛选数据
  - 自动检测多种时间列名格式
  - 时间范围自动扩展到59.999秒，避免漏选数据
- ✨ **优化图表显示**
  - X轴显示时分秒格式，适合频繁数据采集
  - 固定1-30数据点编号，便于跨页对比
- ✨ **新增数据分页**
  - 大数据量自动分页（每页30条）
  - 页码选择器和快速跳转
  - 图表与当前页数据联动显示
- 🔧 **代码优化**
  - 智能时间列检测和处理
  - 提升大数据量处理性能

### v1.0.0
- ✨ 初始版本发布
- ✅ 支持DIF/RAW数据可视化
- ✅ 多种图表类型
- ✅ 数据筛选和导出功能

## 🔧 技术栈

- **Streamlit**: Web应用框架
- **Pandas**: 数据处理
- **Plotly**: 交互式图表库
- **Python**: 编程语言

## 📄 许可证

本工具仅供KeNaiXin项目内部使用。

## 🤝 技术支持

如有问题或建议，请联系开发团队。
